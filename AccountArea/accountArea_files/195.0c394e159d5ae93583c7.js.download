(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{"/mDy":function(e,t,n){},A6WY:function(e,t,n){"use strict";n.r(t),n.d(t,"LazyJqueryUI",(function(){return r})),n.d(t,"lazyJqueryUI",(function(){return a}));var o;n("P5fv");function i(e){return e in $.fn?Promise.resolve():(o||(o=new Promise((function(e){Promise.all([n.e("vendors_embed"),n.e(334),n.e("lazy-jquery-ui")]).then(function(t){n("BvgM"),e()}.bind(null,n)).catch(void 0)}))),o)}var r=function(){function e(e){this._$elem=e}return e.prototype.draggable=function(){var e=arguments,t=this._$elem;return i("draggable").then((function(){return t.draggable.apply(t,e)}))},e.prototype.resizable=function(){var e=arguments,t=this._$elem;return i("resizable").then((function(){return t.resizable.apply(t,e)}))},e.prototype.sortable=function(){var e=arguments,t=this._$elem;return i("sortable").then((function(){return t.sortable.apply(t,e)}))},e.prototype.datepicker=function(){var e=arguments,t=this._$elem;return i("datepicker").then((function(){return t.datepicker.apply(t,e)}))},e}();function a(e){return new r(e)}},UJLt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveRenameDialog=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n("/mDy");var i=n("oNDq");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="yes",s="close";t.SaveRenameDialog=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fields,o=t.confirm,i=t.manager,a=t.title,s=void 0===a?"":a,l=t.destroyOnClose,u=void 0===l||l,c=t.modal,d=void 0!==c&&c;r(this,e),this._form=document.createElement("div"),this._fields=n,this._appendFieldsToForm(),this._title=s,this._destroyOnClose=u,this._modal=d,this._manager=i,this._isConfirmDialogOpened=!1,o&&(this._needCheckConfirm=!0,this._shouldShowConfirm=o.shouldShowDialog,this._getConfirmMessage=o.getMessage)}return o(e,[{key:"setField",value:function(e,t){this._fields.find((function(t){return t.name===e})).value=t}},{key:"show",value:function(){var e=this,t=this._createDialog();return new Promise((function(n){t.then((function(t){t.on("action:submit",(function(t){return e._onSubmit(t,n)})),t.open(),t.on("beforeClose",e._unmountFields.bind(e)),e._fields[0].select()}))}))}},{key:"_appendFieldsToForm",value:function(){var e=this;this._fields.forEach((function(t){t.appendTo(e._form)}))}},{key:"_createDialog",value:function(){var e=this;return new Promise((function(t){Promise.all([n.e("vendors_embed"),n.e("dialogs-core"),n.e(5),n.e(11),n.e(14),n.e(26),n.e(17),n.e(24),n.e(203),n.e("create-dialog")]).then(function(o){var i=n("YDhE").createDialog;t(i({type:e._modal?"modal":"popup",title:e._title,content:$(e._form),actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions i-align_right tv-dialog__section--no-border">',width:470,
destroyOnClose:e._destroyOnClose,manager:e._manager,isClickOutFn:function(){if(e._isConfirmDialogOpened)return!1},actions:[{name:"submit",type:"primary",text:window.t("Save"),key:13,addClass:"js-submit-button"},{name:"cancel",type:"default",text:window.t("Cancel"),method:"close",addClass:"js-cancel-button"}]}))}.bind(null,n)).catch(n.oe)}))}},{key:"_onSubmit",value:function(e,t){var n=this,o=this._validate();if(o)e.error(o.error),o.focus();else{if(!this._needCheckConfirm)return t(this._collectValues(),e),void e.close();Promise.resolve(this._shouldShowConfirm(this._collectValues())).then((function(o){if(!o)return t(n._collectValues(),e),void e.close();n._showConfirmDialog().then((function(o){o===s&&(e.focus(),n._fields[0].focus()),o===a&&(t(n._collectValues(),e),e.close())}))}))}}},{key:"_showConfirmDialog",value:function(){var e=this;return new Promise((function(t){Promise.resolve(e._getConfirmMessage(e._collectValues())).then((function(n){e._isConfirmDialogOpened=!0,(0,i.createConfirmDialog)({type:"modal",content:document.createTextNode(n),manager:e._manager}).then((function(n){n.on("action:yes",(function(e){t(a),e.close()})),n.on("afterClose",(function(){t(s),e._isConfirmDialogOpened=!1})),n.open()}))}))}))}},{key:"_validate",value:function(){return this._fields.find((function(e){return!e.valid}))}},{key:"_collectValues",value:function(){return this._fields.reduce((function(e,t){return e[t.name]=t.value,e}),{})}},{key:"_unmountFields",value:function(){this._fields.forEach((function(e){e.unmount&&e.unmount()}))}}]),e}()},guTw:function(e,t,n){"use strict";(function(t){var o=n("bR4N").bindPopupMenu,i=n("UJLt").SaveRenameDialog,r=n("hkLy").InputField,a=n("oNDq").createConfirmDialog,s=n("LC+v").store,l=n("/yp2"),u=n("txPx").getLogger("Chart.LineToolTemplatesList");function c(e,n,o){var i={saveAsText:$.t("Save As..."),applyDefaultText:$.t("Apply Defaults")};this._toolName=e,this._applyTemplate=n,this._options=$.extend(i,o||{}),t.enabled("charting_library_base")||(this.templatesDeferred=this.loadData())}c.prototype.getData=function(){return s.getState().templates[this._toolName]},c.prototype.loadData=function(){var e=$.Deferred();return this.getData()?e.resolve():(s.dispatch(l.getTemplates(this._toolName,(function(){e.resolve()}))),e)},c.prototype.templatesLoaded=function(){return this.templatesDeferred},c.prototype.createButton=function(e){var t=this,n=(e=$.extend({},e,t._options),$("<a></span></a>").addClass(e.buttonClass?e.buttonClass:"_tv-button").html(e.buttonInner?e.buttonInner:$.t("Template")+'<span class="icon-dropdown">'));return o(n,null,{event:"button-popup",hideEvent:"hide-popup",zIndex:e.popupZIndex,activeClass:e.popupActiveClass,direction:e.popupDirection}),n.bind("click",(function(n){if(n.stopPropagation(),!$(this).is("active")){var o=[];if("function"==typeof e.getDataForSaveAs){o.push({title:e.saveAsText,action:t.showSaveDialog.bind(t,(function(n){var o=JSON.stringify(e.getDataForSaveAs());t.saveTemplate(n,o)})),addClass:"special"})}"function"==typeof e.defaultsCallback&&o.push({title:e.applyDefaultText,
action:e.defaultsCallback,addClass:"special"});var i=[];$.each(t.getData(),(function(n,o){i.push({title:o,action:function(){t.loadTemplate.call(t,o,e.loadTemplateCallback)},deleteAction:function(){runOrSignIn((function(){var e=$.t("Do you really want to delete Drawing Template '{0}' ?").format(o);a({type:"modal",content:document.createTextNode(e)}).then((function(e){e.on("action:yes",(function(e){t.removeTemplate.call(t,o),e.close()})),e.open()}))}),{source:"Delete line tool template"})}})})),i.length&&(o.push({separator:!0}),o=o.concat(i)),$(this).trigger("button-popup",[o])}})),n},c.prototype.loadTemplate=function(e,t){var n=this;return $.get("/drawing-template/"+this._toolName+"/?templateName="+encodeURIComponent(e),(function(e){n._applyTemplate(JSON.parse(e.content)),t&&t()})).error((function(e){u.logWarn(e.responseText)}))},c.prototype.removeTemplate=function(e){e&&s.dispatch(l.startRemoveTemplate(this._toolName,e))},c.prototype.saveTemplate=function(e,t){if(e&&t){e=TradingView.clean(e);s.dispatch(l.saveTemplate(this._toolName,e,t))}},c.prototype.deleteAction=function(e){var t=e,n=this;runOrSignIn((function(){var e=$.t(" Do you really want to delete Drawing Template '{0}' ?").format(t);a({type:"modal",content:document.createTextNode(e)}).then((function(e){e.on("action:yes",(function(e){n.removeTemplate.call(n,t),e.close()})),e.open()}))}),{source:"Delete line tool template"})},c.prototype.showSaveDialog=function(e){var t=this,n=function(e){return TradingView.clean(e.text)},o=new i({fields:[new r({name:"text",label:$.t("Template name")+":",maxLength:64,error:$.t("Please enter template name")})],title:$.t("Save Drawing Template As"),confirm:{shouldShowDialog:function(e){return-1!==t.getData().indexOf(n(e))},getMessage:function(e){return $.t("Drawing Template '{0}' already exists. Do you really want to replace it?").format(n(e))}}});runOrSignIn((function(){o.show().then((function(t){e(t.text)}))}),{source:"Save line tool template",sourceMeta:"Chart"})},e.exports=c}).call(this,n("Kxc7"))},hkLy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.InputField=function(){function e(t){var n=t.label,o=t.name,i=t.maxLength,r=t.error,a=void 0===r?"":r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=o,this._field=document.createElement("label"),this._field.classList.add("tv-rename-chart-dialog__field");var s=document.createElement("span");s.classList.add("tv-rename-chart-dialog__label"),s.innerHTML=n,this._inputElement=document.createElement("input"),this._inputElement.classList.add("tv-control-input"),this._inputElement.setAttribute("type","text"),this._inputElement.setAttribute("name",o),this._inputElement.setAttribute("maxlength",i),this._field.appendChild(s),
this._field.appendChild(this._inputElement),this._error=a}return o(e,[{key:"appendTo",value:function(e){e.appendChild(this._field)}},{key:"focus",value:function(){this._inputElement.focus()}},{key:"select",value:function(){this.focus(),this._inputElement.select()}},{key:"value",set:function(e){this._inputElement.value=e},get:function(){return this._inputElement.value}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._inputElement.value.trim()}},{key:"error",set:function(e){this._error=e},get:function(){return this._error}}]),e}()},jAh7:function(e,t,n){"use strict";n.r(t),n.d(t,"OverlapManager",(function(){return r})),n.d(t,"getRootOverlapManager",(function(){return s}));var o=n("Eyy1"),i=function(){function e(){this._storage=[]}return e.prototype.add=function(e){this._storage.push(e)},e.prototype.remove=function(e){this._storage=this._storage.filter((function(t){return e!==t}))},e.prototype.has=function(e){return this._storage.includes(e)},e.prototype.getItems=function(){return this._storage},e}(),r=function(){function e(e){void 0===e&&(e=document),this._storage=new i,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}return e.prototype.setContainer=function(e){var t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,n),this._container=n},e.prototype.registerWindow=function(e){this._storage.has(e)||this._storage.add(e)},e.prototype.ensureWindow=function(e,t){void 0===t&&(t={position:"fixed",direction:"normal"});var n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);var o=this._document.createElement("div");if(o.style.position=t.position,o.style.zIndex=this._index.toString(),o.dataset.id=e,void 0!==t.index){var i=this._container.childNodes.length;if(t.index>=i)this._container.appendChild(o);else if(t.index<=0)this._container.insertBefore(o,this._container.firstChild);else{var r=this._container.childNodes[t.index];this._container.insertBefore(o,r)}}else"reverse"===t.direction?this._container.insertBefore(o,this._container.firstChild):this._container.appendChild(o);return this._windows.set(e,o),++this._index,o},e.prototype.unregisterWindow=function(e){this._storage.remove(e);var t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))},e.prototype.getZindex=function(e){var t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")},e.prototype.moveToTop=function(e){this.getZindex(e)!==this._index&&(this.ensureWindow(e).style.zIndex=(++this._index).toString())},e.prototype.removeWindow=function(e){this.unregisterWindow(e)},e}(),a=new WeakMap;function s(e){void 0===e&&(e=document);var t=e.getElementById("overlap-manager-root");if(null!==t)return Object(o.ensureDefined)(a.get(t));var n=new r(e),i=function(e){var t=e.createElement("div");return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",
t.style.left="0px",t.id="overlap-manager-root",t}(e);return a.set(i,n),n.setContainer(i),e.body.appendChild(i),n}},uo4K:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path fill="currentColor" d="M5.18 6.6L1.3 2.7.6 2 2 .59l.7.7 3.9 3.9 3.89-3.9.7-.7L12.61 2l-.71.7L8 6.6l3.89 3.89.7.7-1.4 1.42-.71-.71L6.58 8 2.72 11.9l-.71.7-1.41-1.4.7-.71 3.9-3.9z"/></svg>'}}]);